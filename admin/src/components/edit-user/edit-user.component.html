@if (user.id != 0) { @if (closeMessage) {
<div open="true" id="closeUserModal" class="modal">
  <div class="modal-box">
    @if (success) { @if (sureDelete) {
    <h3 class="font-bold text-lg">¡Usuario eliminado correctamente!</h3>
    <p>El usuario se ha eliminado correctamente.</p>
    <div class="flex justify-center mt-4">
      <button
        class="rounded-lg h-[3rem] w-[40%] font-semibold text-[14px] bg-white text-black opacity-90 hover:opacity-100"
        (click)="close()"
      >
        Cerrar
      </button>
    </div>
    }@else {

    <h3 class="font-bold text-lg">¡Usuario guardado!</h3>
    <p>El usuario se ha guardado correctamente.</p>
    <div class="flex justify-center mt-4">
      <button
        class="rounded-lg h-[3rem] w-[40%] font-semibold text-[14px] bg-white text-black opacity-90 hover:opacity-100"
        (click)="close()"
      >
        Cerrar
      </button>
    </div>
    } }@else {
    <h3 class="font-bold text-lg text-red-400">¡Error!</h3>
    <p>Ha ocurrido un error al guardar el usuario.</p>
    <div class="flex justify-center mt-4">
      <button
        class="rounded-lg h-[3rem] w-[40%] font-semibold text-[14px] bg-white text-black opacity-90 hover:opacity-100"
        (click)="close()"
      >
        Cerrar
      </button>
    </div>
    }
  </div>
  <form method="dialog" (click)="close()" class="modal-backdrop">
    <button>close</button>
  </form>
</div>
}@else if (saving) {
<div open="true" id="saveUserModal" class="modal">
  <div class="modal-box">
    <div class="flex justify-center py-5">
      Guardando usuario...
      <span class="loading loading-spinner mx-2 loading-md"></span>
    </div>
  </div>
</div>
}@else if (sureDelete) {
<div open="true" id="deleteUserModal" class="modal">
  <div class="modal-box">
    <h3 class="font-bold text-lg">¡Ten cuidado con esto!</h3>
    <p>¿Estás seguro de que quieres eliminar este usuario?</p>
    <div class="grid grid-cols-2 gap-2 mt-4">
      <button
        class="rounded-lg h-[3rem] font-semibold text-[14px] bg-white text-black opacity-90 hover:opacity-100"
        (click)="deleteUser()"
      >
        Eliminar
      </button>
      <button
        class="rounded-lg h-[3rem] font-semibold text-[14px] bg-[#FF9696] text-black opacity-90 hover:opacity-100"
        (click)="close()"
      >
        Cancelar
      </button>
    </div>
  </div>
  <form method="dialog" (click)="close()" class="modal-backdrop">
    <button>close</button>
  </form>
</div>
}@else if (closeMessage) {
<div open="true" id="closeUserModal" class="modal">
  <div class="modal-box">
    @if (success) {
    <h3 class="font-bold text-lg">¡Usuario guardado!</h3>
    <p>El usuario se ha guardado correctamente.</p>
    <div class="flex justify-center mt-4">
      <button
        class="rounded-lg h-[3rem] w-[40%] font-semibold text-[14px] bg-white text-black opacity-90 hover:opacity-100"
        (click)="close()"
      >
        Cerrar
      </button>
    </div>
    }@else {
    <h3 class="font-bold text-lg text-red-400">¡Error!</h3>
    <p>Ha ocurrido un error al guardar el usuario.</p>
    <div class="flex justify-center mt-4">
      <button
        class="rounded-lg h-[3rem] w-[40%] font-semibold text-[14px] bg-white text-black opacity-90 hover:opacity-100"
        (click)="close()"
      >
        Cerrar
      </button>
    </div>
    }
  </div>
  <form method="dialog" (click)="close()" class="modal-backdrop">
    <button>close</button>
  </form>
</div>
} @else {
<div open="true" id="editUserModal" class="modal">
  <div class="modal-box">
    <h3 class="font-bold text-lg">Editar usuario</h3>
    <p>ID: {{ user.id }}</p>
    <form class="mt-4 flex flex-col gap-2">
      <label class="form-control w-full">
        <div class="label">
          <span class="label-text">Nombre</span>
        </div>
        <input
          type="text"
          [placeholder]="user.firstName"
          [formControl]="firstName"
          class="input input-bordered w-full"
        />
      </label>

      <label class="form-control w-full">
        <div class="label">
          <span class="label-text">Apellido</span>
        </div>
        <input
          type="text"
          [placeholder]="user.lastName"
          [formControl]="lastName"
          class="input input-bordered w-full"
        />
      </label>

      <label class="form-control w-full">
        <div class="label">
          <span class="label-text">Correo electronico</span>
        </div>
        <input
          type="text"
          [placeholder]="user.email"
          [formControl]="email"
          class="input input-bordered w-full"
        />
      </label>

      <label class="form-control w-full">
        <div class="label">
          <span class="label-text">Plan</span>
        </div>
        <select class="select select-bordered" [formControl]="plan">
          @for (plan of [1,2,3]; track $index) { @if (plan ==
          user.subscriptionId) {
          <option selected class="py-4">{{ planToText(plan) }}</option>
          }@else {
          <option>{{ planToText(plan) }}</option>
          } }
        </select>
      </label>
    </form>

    <div class="grid grid-cols-2 gap-4 justify-between mt-8">
      <button
        class="rounded-lg h-[3rem] font-semibold text-[14px] bg-white text-black opacity-90 hover:opacity-100"
        (click)="save()"
      >
        Guardar
      </button>
      <button
        class="rounded-lg h-[3rem] font-semibold text-[14px] bg-[#FF9696] text-black opacity-90 hover:opacity-100"
        (click)="sureClick()"
      >
        Eliminar usuario
      </button>
    </div>
  </div>
  <form method="dialog" (click)="close()" class="modal-backdrop">
    <button>close</button>
  </form>
</div>
} }
